{% extends "base.html" %} {% block title %}Admin Dashboard - EduSync{% endblock
%} {% block content %}
<div class="space-y-8">
  <!-- Dashboard Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h1
        class="text-4xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600 dark:from-indigo-400 dark:via-purple-400 dark:to-indigo-400 bg-clip-text text-transparent"
      >
        Admin Dashboard
      </h1>
      <p class="mt-2 text-lg text-gray-600 dark:text-gray-300">
        Welcome back! Here's what's happening at your school today.
      </p>
    </div>
    <div class="mt-4 sm:mt-0">
      <div
        class="flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400"
      >
        <svg
          class="h-4 w-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span
          >Last updated: <span class="font-medium" id="lastUpdated"></span
        ></span>
      </div>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Students Card -->
    <div
      class="group relative overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 backdrop-blur-sm rounded-2xl border border-blue-200/50 dark:border-blue-700/50 p-6 hover:shadow-xl hover:shadow-blue-200/20 dark:hover:shadow-blue-900/20 transition-all duration-300 hover:scale-105"
    >
      <div
        class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-indigo-600/20 rounded-full blur-2xl"
      ></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg"
          >
            <svg
              class="h-6 w-6 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
              />
            </svg>
          </div>
          <div class="text-right">
            <div class="text-2xl font-bold text-gray-900 dark:text-white">
              {{ total_students }}
            </div>
            <div class="text-xs text-green-600 dark:text-green-400 font-medium">
              +12% this month
            </div>
          </div>
        </div>
        <div>
          <h3
            class="text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wide"
          >
            Total Students
          </h3>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
            Active enrollments
          </p>
        </div>
      </div>
    </div>

    <!-- Teachers Card -->
    <div
      class="group relative overflow-hidden bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-900/20 dark:to-green-900/20 backdrop-blur-sm rounded-2xl border border-emerald-200/50 dark:border-emerald-700/50 p-6 hover:shadow-xl hover:shadow-emerald-200/20 dark:hover:shadow-emerald-900/20 transition-all duration-300 hover:scale-105"
    >
      <div
        class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-emerald-400/20 to-green-600/20 rounded-full blur-2xl"
      ></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl shadow-lg"
          >
            <svg
              class="h-6 w-6 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
          </div>
          <div class="text-right">
            <div class="text-2xl font-bold text-gray-900 dark:text-white">
              {{ total_teachers }}
            </div>
            <div class="text-xs text-green-600 dark:text-green-400 font-medium">
              +3% this month
            </div>
          </div>
        </div>
        <div>
          <h3
            class="text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wide"
          >
            Total Teachers
          </h3>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
            Active faculty
          </p>
        </div>
      </div>
    </div>

    <!-- Classes Card -->
    <div
      class="group relative overflow-hidden bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-900/20 dark:to-orange-900/20 backdrop-blur-sm rounded-2xl border border-amber-200/50 dark:border-amber-700/50 p-6 hover:shadow-xl hover:shadow-amber-200/20 dark:hover:shadow-amber-900/20 transition-all duration-300 hover:scale-105"
    >
      <div
        class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-amber-400/20 to-orange-600/20 rounded-full blur-2xl"
      ></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl shadow-lg"
          >
            <svg
              class="h-6 w-6 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
              />
            </svg>
          </div>
          <div class="text-right">
            <div class="text-2xl font-bold text-gray-900 dark:text-white">
              {{ total_classes }}
            </div>
            <div class="text-xs text-blue-600 dark:text-blue-400 font-medium">
              8 active today
            </div>
          </div>
        </div>
        <div>
          <h3
            class="text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wide"
          >
            Total Classes
          </h3>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
            Academic sessions
          </p>
        </div>
      </div>
    </div>

    <!-- System Users Card -->
    <div
      class="group relative overflow-hidden bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 backdrop-blur-sm rounded-2xl border border-purple-200/50 dark:border-purple-700/50 p-6 hover:shadow-xl hover:shadow-purple-200/20 dark:hover:shadow-purple-900/20 transition-all duration-300 hover:scale-105"
    >
      <div
        class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-400/20 to-pink-600/20 rounded-full blur-2xl"
      ></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-lg"
          >
            <svg
              class="h-6 w-6 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
              />
            </svg>
          </div>
          <div class="text-right">
            <div class="text-2xl font-bold text-gray-900 dark:text-white">
              {{ total_users }}
            </div>
            <div class="text-xs text-green-600 dark:text-green-400 font-medium">
              {{ total_users - 5 }} online
            </div>
          </div>
        </div>
        <div>
          <h3
            class="text-sm font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wide"
          >
            System Users
          </h3>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
            Platform access
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-4">
    <!-- Attendance Chart -->
    <div
      class="bg-white/60 dark:bg-gray-900/60 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-8 shadow-xl shadow-gray-200/20 dark:shadow-gray-900/20"
    >
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
            Attendance Trends
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
            Last 7 days overview
          </p>
        </div>
        <div class="flex items-center space-x-2">
          <div class="w-3 h-3 bg-indigo-500 rounded-full"></div>
          <span class="text-sm text-gray-600 dark:text-gray-300"
            >Daily Records</span
          >
        </div>
      </div>
      <script src="{{ url_for('static', filename='js/chart.umd.min.js') }}"></script>

      <div class="chart-container relative" style="height: 300px; width: 100%">
        <canvas id="attendanceChart"></canvas>
      </div>
    </div>

    <!-- Recent Activity -->
    <div
      class="bg-white/60 dark:bg-gray-900/60 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-8 shadow-xl shadow-gray-200/20 dark:shadow-gray-900/20"
    >
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
            Recent Activity
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
            Latest system events
          </p>
        </div>
        <button
          class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 text-sm font-medium"
        >
          View All
        </button>
      </div>
      <div class="space-y-4">
        <div
          class="flex items-start space-x-3 p-3 rounded-lg bg-gray-50/50 dark:bg-gray-800/50"
        >
          <div
            class="flex-shrink-0 w-2 h-2 bg-green-500 rounded-full mt-2"
          ></div>
          <div class="flex-1 min-w-0">
            <p class="text-sm text-gray-900 dark:text-white font-medium">
              New student enrolled
            </p>
            <p class="text-xs text-gray-500 dark:text-gray-400">
              John Doe joined Class 7A • 2 hours ago
            </p>
          </div>
        </div>
        <div
          class="flex items-start space-x-3 p-3 rounded-lg bg-gray-50/50 dark:bg-gray-800/50"
        >
          <div
            class="flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2"
          ></div>
          <div class="flex-1 min-w-0">
            <p class="text-sm text-gray-900 dark:text-white font-medium">
              Attendance recorded
            </p>
            <p class="text-xs text-gray-500 dark:text-gray-400">
              Class 8B morning session • 4 hours ago
            </p>
          </div>
        </div>
        <div
          class="flex items-start space-x-3 p-3 rounded-lg bg-gray-50/50 dark:bg-gray-800/50"
        >
          <div
            class="flex-shrink-0 w-2 h-2 bg-purple-500 rounded-full mt-2"
          ></div>
          <div class="flex-1 min-w-0">
            <p class="text-sm text-gray-900 dark:text-white font-medium">
              New teacher added
            </p>
            <p class="text-xs text-gray-500 dark:text-gray-400">
              Sarah Johnson - Mathematics • 1 day ago
            </p>
          </div>
        </div>
        <div
          class="flex items-start space-x-3 p-3 rounded-lg bg-gray-50/50 dark:bg-gray-800/50"
        >
          <div
            class="flex-shrink-0 w-2 h-2 bg-amber-500 rounded-full mt-2"
          ></div>
          <div class="flex-1 min-w-0">
            <p class="text-sm text-gray-900 dark:text-white font-medium">
              System backup completed
            </p>
            <p class="text-xs text-gray-500 dark:text-gray-400">
              Daily backup successful • 1 day ago
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div
    class="bg-white/60 dark:bg-gray-900/60 backdrop-blur-sm rounded-2xl border border-gray-200/50 dark:border-gray-700/50 p-8 shadow-xl shadow-gray-200/20 dark:shadow-gray-900/20"
  >
    <div class="flex items-center justify-between mb-6">
      <div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
          Quick Actions
        </h2>
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
          Frequently used administrative tasks
        </p>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <a
        href="{{ url_for('students.create') }}"
        class="group relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white rounded-xl p-6 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
      >
        <div
          class="absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-full blur-xl"
        ></div>
        <div class="relative">
          <div class="flex items-center space-x-3 mb-2">
            <svg
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6v6m0 0v6m0-6h6m-6 0H6"
              />
            </svg>
            <span class="font-semibold">Add Student</span>
          </div>
          <p class="text-sm text-white/80">Enroll new student</p>
        </div>
      </a>

      <a
        href="{{ url_for('teachers.create') }}"
        class="group relative overflow-hidden bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-xl p-6 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
      >
        <div
          class="absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-full blur-xl"
        ></div>
        <div class="relative">
          <div class="flex items-center space-x-3 mb-2">
            <svg
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
            <span class="font-semibold">Add Teacher</span>
          </div>
          <p class="text-sm text-white/80">Register new faculty</p>
        </div>
      </a>

      <a
        href="{{ url_for('classes.create') }}"
        class="group relative overflow-hidden bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl p-6 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
      >
        <div
          class="absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-full blur-xl"
        ></div>
        <div class="relative">
          <div class="flex items-center space-x-3 mb-2">
            <svg
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
              />
            </svg>
            <span class="font-semibold">Create Class</span>
          </div>
          <p class="text-sm text-white/80">Setup new class</p>
        </div>
      </a>

      <a
        href="{{ url_for('auth.register') }}"
        class="group relative overflow-hidden bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl p-6 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
      >
        <div
          class="absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-full blur-xl"
        ></div>
        <div class="relative">
          <div class="flex items-center space-x-3 mb-2">
            <svg
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"
              />
            </svg>
            <span class="font-semibold">Add User</span>
          </div>
          <p class="text-sm text-white/80">Create system user</p>
        </div>
      </a>
    </div>
  </div>
</div>

<!-- Chart.js Script -->

<script>
  // Update timestamp
  document.getElementById('lastUpdated').textContent = new Date().toLocaleTimeString();

  // Attendance chart with modern styling
  const ctx = document.getElementById('attendanceChart').getContext('2d');
  const attendanceChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [{% for item in attendance_data %}"{{ item.date }}",{% endfor %}],
      datasets: [{
        label: 'Attendance Records',
        data: [{% for item in attendance_data %}{{ item.count }},{% endfor %}],
        backgroundColor: 'rgba(99, 102, 241, 0.1)',
        borderColor: 'rgba(99, 102, 241, 1)',
        borderWidth: 3,
        tension: 0.4,
        pointRadius: 6,
        pointHoverRadius: 8,
        pointBackgroundColor: 'rgba(99, 102, 241, 1)',
        pointBorderColor: '#ffffff',
        pointBorderWidth: 2,
        pointHoverBackgroundColor: 'rgba(99, 102, 241, 1)',
        pointHoverBorderColor: '#ffffff',
        pointHoverBorderWidth: 3,
        fill: true
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: {
        intersect: false,
        mode: 'index'
      },
      plugins: {
        legend: {
          display: false
        },
        tooltip: {
          backgroundColor: 'rgba(17, 24, 39, 0.9)',
          titleColor: '#ffffff',
          bodyColor: '#ffffff',
          borderColor: 'rgba(99, 102, 241, 1)',
          borderWidth: 1,
          cornerRadius: 8,
          displayColors: false,
          titleFont: {
            size: 14,
            weight: 'bold'
          },
          bodyFont: {
            size: 13
          },
          padding: 12
        }
      },
      scales: {
        x: {
          grid: {
            display: false
          },
          border: {
            display: false
          },
          ticks: {
            color: 'rgba(107, 114, 128, 0.8)',
            font: {
              size: 12
            }
          }
        },
        y: {
          beginAtZero: true,
          grid: {
            color: 'rgba(107, 114, 128, 0.1)',
            drawBorder: false
          },
          border: {
            display: false
          },
          ticks: {
            precision: 0,
            color: 'rgba(107, 114, 128, 0.8)',
            font: {
              size: 12
            },
            padding: 8
          }
        }
      }
    }
  });

  // Add some interactivity
  document.addEventListener('DOMContentLoaded', function() {
    // Animate cards on load
    const cards = document.querySelectorAll('.group');
    cards.forEach((card, index) => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      setTimeout(() => {
        card.style.transition = 'all 0.6s ease-out';
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
      }, index * 100);
    });
  });
</script>

{% endblock %}
